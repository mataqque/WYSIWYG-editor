<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <link rel="stylesheet" href="/bootstrap/bootstrap.css">
    <script src="https://kit.fontawesome.com/6611670d58.js" crossorigin="anonymous"></script>
    <link rel="stylesheet" href="style.css">
    <title>Document</title>
</head>
<body>
    <div class="tablero">
        <div class="header">
            <div class="container">
            <button onclick="formatDoc('bold');"><i class="fas fa-file-code"></i></button>
            <li class="barra"></li>
            <button onclick="formatDoc('bold');" title="Bold"><i class="fas fa-bold"></i></button>
            <li class="barra"></li>
            <button onclick="formatDoc('underline');"><i class="fas fa-underline"></i></button>
            <li class="barra"></li>
            <button class="open" onclick="llamada(['h1','h2','h3','h4'])"><i class="fas fa-text-height"></i><div class="mostrarselect"></div></button>
                
            <li class="barra"></li>
            <button onclick="formatDoc('formatblock','h1');">A</button>
            <button onclick="formatDoc('bold');"><i class="fas fa-link"></i></button>
            <button onclick="formatDoc('bold');"><i class="fas fa-image"></i></button>
            <button onclick="formatDoc('bold');"><i class="fas fa-photo-video"></i></button>
        </div>
        </div>
        <div class="contenido_html" contenteditable="true" id="textbox" aria-disabled="false" tabindex="-1" spellcheck="true" >
            <p>﻿</p>
        </div>
        <p id="editMode">
                <input type="checkbox" name="switchMode" id="switchBox" onchange="setDocMode(this.checked);" /> 
                <label for="switchBox">Show HTML</label></p>
    </div>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.0/dist/umd/popper.min.js" integrity="sha384-Q6E9RHvbIyZFJoft+2mJbHaEWldlvI9IOYy5n3zV9zzTtmI3UksdQRVvoxMfooAo" crossorigin="anonymous"></script>
    <script src="/bootstrap/bootstrap.js"></script>
  
    <script type="text/javascript">
    var mostrar = document.getElementsByClassName("mostrarselect");
    var valorf = true;
        function llamada(valores){
            if(valorf==true){
            for(i=0;i<valores.length;i++){
                let elemento = document.createElement("div");
                elemento.textContent = valores[i];
                mostrar[0].appendChild(elemento);
                }
                valorf = false;
            }
        }

    var contenedor = document.getElementsByClassName("contenido_html");
    var contenedorhtml = document.getElementById("textbox");
    var palabra = "";
    var cont = 0;
    var valor = true;
    document.getElementsByClassName("contenido_html")[0].addEventListener("keydown",function(event){
        let cantidad = contenedor[0].innerHTML.indexOf("<p>");
        let etiquetap = contenedor[0].innerHTML.substr(cantidad,3);
        if(etiquetap !== "<p>"){
            let elemento = document.createElement("p");
            elemento.textContent = "﻿";
            document.getElementsByClassName("contenido_html")[0].appendChild(elemento)
        }
    });
        function formatDoc(sCmd, sValue) {
            console.log(sCmd)
            document.execCommand(sCmd, false, sValue); $("#textbox").focus();
            // if (validateMode()) { document.execCommand(sCmd, false, sValue); oDoc.focus(); }
        }
//         function validateMode() {
//             if (!document.compForm.switchMode.checked) { return true ; }
//             alert("Uncheck \"Show HTML\".");
//             oDoc.focus();
//             return false;
            
//         }

//         function setDocMode(bToSource) {
//   var oContent;
//   if (bToSource) {
//     oContent = document.createTextNode(oDoc.innerHTML);
//     oDoc.innerHTML = "";
//     var oPre = document.createElement("pre");
//     oDoc.contentEditable = false;
//     oPre.id = "sourceText";
//     oPre.contentEditable = true;
//     oPre.appendChild(oContent);
//     oDoc.appendChild(oPre);
//   } else {
//     if (document.all) {
//       oDoc.innerHTML = oDoc.innerText;
//     } else {
//       oContent = document.createRange();
//       oContent.selectNodeContents(oDoc.firstChild);
//       oDoc.innerHTML = oContent.toString();
//     }
//     oDoc.contentEditable = true;
//   }
//   oDoc.focus();
// }
    </script>
</body>
</html>